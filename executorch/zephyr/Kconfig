# Copyright (c) 2025 Arm Limited and/or its affiliates.
# SPDX-License-Identifier: Apache-2.0

menuconfig EXECUTORCH
	bool "ExecuTorch ML Runtime"
	help
	  Enable ExecuTorch machine learning runtime support.
	  ExecuTorch is a lightweight runtime for executing PyTorch models
	  on resource-constrained embedded devices.

if EXECUTORCH

config EXECUTORCH_METHOD_ALLOCATOR_POOL_SIZE
	int "Method allocator pool size in bytes"
	default 16384
	help
	  Size of the method allocator pool in bytes. This memory is used
	  for allocating ExecuTorch method instances and their metadata.
	  Default is 16KB which should be sufficient for most small models.
	  Larger models may require more memory.

config EXECUTORCH_TEMP_ALLOCATOR_POOL_SIZE
	int "Temporary allocator pool size in bytes"
	default 2048
	help
	  Size of the temporary allocator pool in bytes. This memory is used
	  for temporary allocations during model execution such as intermediate
	  tensor calculations. Default is 2KB which should be sufficient for
	  simple operations. Complex models may require more memory.

config EXECUTORCH_USE_PREBUILT_LIBS
	bool "Use pre-built ExecuTorch libraries"
	default y
	help
	  Use pre-built ExecuTorch libraries from the ai_layer/engine/lib
	  directory. These libraries are generated by the Docker build workflow.
	  Disable this option to build ExecuTorch from source.

config EXECUTORCH_ETHOS_U_DELEGATE
	bool "Enable Ethos-U NPU delegate"
	depends on CPU_CORTEX_M
	default y if SOC_SERIES_MPS3
	help
	  Enable the Ethos-U NPU delegate for hardware-accelerated inference
	  on Arm Ethos-U equipped devices.

config EXECUTORCH_CORTEX_M_OPTIMIZATIONS
	bool "Enable Cortex-M optimized kernels"
	depends on CPU_CORTEX_M
	default y
	help
	  Enable Cortex-M optimized kernels using CMSIS-NN for improved
	  performance on Arm Cortex-M processors.

endif # EXECUTORCH
